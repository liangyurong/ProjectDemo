
### 这个项目是什么？

为了学习shiro的角色分配和权限分配，特地整合了vue来学习

### 密码加密

本项目统一用“salt”当做盐。

但是，实际上的生产项目应当是每个用户拥有的盐不同。

### 跨域

使用token作为登录凭证,不使用session,避免跨域问题

### 不同的角色登录，有不同的权限

super-admin,登录之后有增删改查功能

vip有增改查功能

普通用户只能查询

###  登录

登录之后，会赋予用户不同的角色和权限。能够进行某些操作，不能进行某些操作。

### 一般做分离以后，就不需要再去考虑用session和cookie了.而是使用token

本项目使用JwtToken

### 登陆认证和授权管理，目前已经有成熟的框架，可以尝试使用shiro框架，不管是用session还是token都可以

```text
前后端分离项目中，我们一般采用的是无状态登录：服务端不保存任何客户端请求者信息，客户端需要自己携带着信息去访问服务端，并且携带的信息可以被服务端辨认。

而Shiro默认的拦截跳转都是跳转url页面，拦截校验机制恰恰使用的session；而前后端分离后，后端并无权干涉页面跳转。

因此前后端分离项目中使用Shiro就需要对其进行改造，我们可以在整合Shiro的基础上自定义登录校验，继续整合JWT(或者oauth2.0等)，使其成为支持服务端无状态登录，即token登录。

在Vue项目中，只需要根据登录用户的权限信息动态的加载路由列表就可以动态的构造出访问菜单。
```

```text
前端调用登录接口传入帐号密码，后端验证帐号密码正确后，保存登录信息到session，然后设置cookie返回给前端，cookie保存的是session id，前端拿到cookie后，后续的其他接口自动带上cookie，后端验证cookie获取对应session信息判断登录。

cookie只是一个前端保存session id的一个载体，你完全可以不用cookie，在登录接口成功后的响应中返回一个token之类的字段作为session id返给前端，前端怎么保存这个值是前端的事情，只要后续调用接口跟上这个字段便于后端验证就行了。

还有一种是后端不保存session，登录成功后生成jwt返回给前端，前端每次调接口跟上次参数，后端解析验证jwt就行了，jwt中可以包含简单的用户信息，这样后端不用自己保存session信息可以方便横向拓展
```


## 难点

### 1、前端项目如何实现带权限的页面跳转，因为跳转页面的请求不会走后台，后台只提供数据

登陆之后，后台将roles和permissions信息传给前台，前台将持有登陆人的角色和权限信息。组件根据权限信息来显示，

使用router，绑定路由，访问权限绑定到对应组件上，实现页面级别的权限控制（暂未实现）

使用指令，来控制细粒度级别的按钮显示等

在Vue项目中，只需要根据登录用户的权限信息动态的加载路由列表就可以动态的构造出访问菜单。

### 页面跳转

前后端分离项目中，我们一般采用的是无状态登录：服务端不保存任何客户端请求者信息，客户端需要自己携带着信息去访问服务端，并且携带的信息可以被服务端辨认。

而Shiro默认的拦截跳转都是跳转url页面，拦截校验机制恰恰使用的session；而前后端分离后，后端并无权干涉页面跳转。

因此前后端分离项目中使用Shiro就需要对其进行改造，我们可以在整合Shiro的基础上自定义登录校验，继续整合JWT(或者oauth2.0等)，使其成为支持服务端无状态登录，即token登录。

在Vue项目中，只需要根据登录用户的权限信息动态的加载路由列表就可以动态的构造出访问菜单。




